include ../../views/mixins/formParts
include ../../views/mixins/buttons



.section-filter

    .main-content__container

        .section-filter__inner

            filter.filter.section-filter__filter(ng-if="feed.filter_enabled" feed-filter="feed.filter")

            .sort.section-filter__sort
                .sort__item
                    +select("Sort", {
                        "type" : {
                            "-publicationDate" : "Newest first",
                            "publicationDate" : "Oldest first"
                        }
                    }, true)(ng-model = "feed.order")
                .sort__item
                    +select("Show", {
                        "show" : {
                            "" : "All adverts",
                            "1" : "Last day",
                            "3" : "Last 3 days",
                            "7" : "Last week",
                            "30" : "Last month"
                        }
                    }, true)(ng-model = "feed.dateRange")

.main-content__container
    h1 {{feed.filtered.length}}
    .adverts-feed(ng-if="!feed.customFilter")
        advert.adverts-feed__item.advert(ng-repeat="(index, advert) in feed.filtered = (feed.adverts | dateRange : feed.dateRange | filter: feed.filter | orderBy : feed.order)" fields="advert" hide-fields="feed.hideFields" author="feed.authors[advert.author]" ng-if="feed.allAllowed")
        advert.adverts-feed__item.advert(ng-repeat="(index, advert) in feed.filtered = (feed.adverts | dateRange : feed.dateRange | feed : feed.authors | filter: feed.filter | orderBy : feed.order)" fields="advert" hide-fields="feed.hideFields" author="feed.authors[advert.author]" ng-if="!feed.allAllowed")
    .adverts-feed(ng-if="feed.customFilter")
        advert.adverts-feed__item.advert(ng-repeat="(index, advert) in feed.filtered = (feed.adverts | dateRange : feed.dateRange | filter: feed.customFilter | orderBy : feed.order)" fields="advert" hide-fields="feed.hideFields" author="feed.authors[advert.author]")
